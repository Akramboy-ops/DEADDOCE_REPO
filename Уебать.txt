from asyncio import sleep
from .. import loader, utils

def register(cb):
	cb(Ğ£ĞµĞ±Ğ°Ñ‚ÑŒMod())
	
class Ğ£ĞµĞ±Ğ°Ñ‚ÑŒMod(loader.Module):
	"""Ğ£ĞµĞ±Ñ‘Ñ‚ Ğ»ÑĞ±Ğ¾Ğ³Ğ¾"""
	strings = {'name': 'Ğ£ĞµĞ±Ğ°Ñ‚ÑŒ'}
	def __init__(self):
		self.name = self.strings['name']
		self._me = None
		self._ratelimit = []
		
	async def ÑƒĞµĞ±Ğ°Ñ‚ÑŒcmd(self, message):
		""".ÑƒĞµĞ±Ğ°Ñ‚ÑŒ <ĞºĞ¾Ğ»Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾> <Ğ Ğ•ĞŸĞ›ĞĞ™ Ğ‘Ğ›Ğ¯Ğ¢Ğ¬>"""
		reply = await message.get_reply_message()
		if not reply:
			await message.edit("<b>ĞšĞĞ“Ğ Ğ£Ğ•Ğ‘ĞĞ¢Ğ¬?</b>")
			return
		id = reply.from_id
		args = utils.get_args(message)
		count = 50
		if args:
			if args[0].isdigit():
				if int(args[0]) < 0:
					count = 50
				else:
					count = int(args[0])
		txt = '<a href="tg://user?id={}">ğŸ–•ğŸ¿ĞĞ•Ğ“Ğ Ğ« ĞŸĞ˜Ğ”ĞĞ ĞĞ¡Ğ«ğŸ–•ğŸ¿</a>'.format(id)
		await message.delete()
		for _ in range(count):
			await sleep(0.3)
			msg = await message.client.send_message(message.to_id, txt)
			await sleep(0.3)
			await msg.delete()